<html>
<head>
<style>
body {
  margin:0;
  padding:2%;
}
.container {
  -webkit-perspective: 40000px;
  -moz-perspective: 40000px;
  perspective: 40000px;
  -webkit-perspective-origin-y: 100%;
  -moz-perspective-origin-y: 100%;
  perspective-origin-y: 100%;
  -webkit-transform-style: preserve-3d;
  -moz-transform-style: preserve-3d;
  transform-style: preserve-3d;
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  position:relative;
}
.tile-container {
  -webkit-perspective: 20000px;
  -moz-perspective: 20000px;
  perspective: 20000px;
  -webkit-transform-style: preserve-3d;
  -moz-transform-style: preserve-3d;
  transform-style: preserve-3d;
  background: transparent;
  position: absolute;
}
.tile {
  -webkit-perspective: 2000px;
  -moz-perspective: 2000px;
  perspective: 2000px;
  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  backface-visibility: hidden;
  -webkit-transform-style: flat;
  -moz-transform-style: flat;
  transform-style: flat;
  background: transparent;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border:3px solid #aaa;
  width:100%;
  height:100%;
}
</style>
<script>
function makeLayers(){
	var container = document.getElementById('iFrameContainer');
	container.innerHTML = '';
	var width = this.innerWidth;
	var height = this.innerHeight;

	var nTiles = parseInt(document.getElementById('numTiles').value);
	powTiles = (nTiles > 2) ? Math.pow( 2, Math.round( Math.log( nTiles ) / Math.log( 2 ) ) ) : nTiles;
	
	var dw = 1280;
	var dh = 1424.6;

	var z = 0;
	scaleWidth = 	(width / powTiles << 2) / dw;   
	var cols = Math.floor(width /(dw *scaleWidth));
	var rows = Math.round((nTiles) / cols);
	var scaleHeight = (height / rows) /dh;
	for(var y=0;y<rows;y++){
	  for(var x=0;x<cols;x++){
	  	if(z++ > nTiles)
	  		return;
	    var dv = document.createElement('div');
	    var xPos = x * dw;
	    var yPos = y * dh;   
	    dv.className = 'tile-container';
	    dv.style.transition = 'all 200ms ease-out'; 
	    dv.style.webkitTransition = 'all 200ms ease-out'; 
	    dv.style.webkitTransformOrigin = '0% 0%'; 
	    dv.style.webkitTransform = 'scale('+Math.min(scaleWidth,scaleHeight)+') translate3d('+xPos+'px, '+yPos+'px, 0px)'; 
	    dv.style.position = 'absolute'; 
	    dv.style.display = 'block'; 
	    dv.style.left = '0px'; 
	    dv.style.top = '0px'; 
	    dv.style.width = dw+'px'; 
	    dv.style.height = dh+'px'; 
	    dv.style.zIndex = 100; 
	    dv.style.visibility = 'visible'; 
	    dv.style.opacity = 1; 
	    dv.style.webkitPerspectiveOriginX = xPos+'px'; 
	    dv.style.webkitPerspectiveOriginhY = yPos+'px';
	    
	    var iframe = document.createElement('iframe');
	    iframe.className = 'tile';
	    dv.appendChild(iframe);
	    iframe.src = 'http://soasta.com';
	    container.appendChild(dv);
	  }
	}
}
</script>
</head>
<body>
	

  <form onsubmit="event.preventDefault(); return makeLayers();">
    <input type="text" name="numTiles" id="numTiles" value ="8" />
    <input type="submit" value="make Layers"/>
  </form>
  <div id ="iFrameContainer" class="container">
  <!--
    <div style="transition: all 200ms ease-out; -webkit-transition: all 200ms ease-out; -webkit-transform-origin: 0% 0%; -webkit-transform: scale(0.26953125) translate3d(0px, 0px, 0px); position: absolute; display: block; left: 0px; top: 0px; width: 1280px; height: 1424.695652173913px; z-index: 100; visibility: visible; opacity: 1; -webkit-perspective-origin-x: 2560px; -webkit-perspective-origin-y: 1425px;" class="tile-container"><iframe class="tile" src="http://soasta.com"></iframe></div>
    <div style="transition: all 200ms ease-out; -webkit-transition: all 200ms ease-out; -webkit-transform-origin: 0% 0%; -webkit-transform: scale(0.26953125) translate3d(1280px, 0px, 0px); position: absolute; display: block; left: 0px; top: 0px; width: 1280px; height: 1424.695652173913px; z-index: 100; visibility: visible; opacity: 1; -webkit-perspective-origin-x: 2560px; -webkit-perspective-origin-y: 1425px;" class="tile-container"><iframe class="tile" src="http://soasta.com"></iframe></div>
    <div style="transition: all 200ms ease-out; -webkit-transition: all 200ms ease-out; -webkit-transform-origin: 0% 0%; -webkit-transform: scale(0.26953125) translate3d(2560px, 0px, 0px); position: absolute; display: block; left: 0px; top: 0px; width: 1280px; height: 1424.695652173913px; z-index: 100; visibility: visible; opacity: 1; -webkit-perspective-origin-x: 2560px; -webkit-perspective-origin-y: 1425px;" class="tile-container"><iframe class="tile" src="http://soasta.com"></iframe></div>
    <div style="transition: all 200ms ease-out; -webkit-transition: all 200ms ease-out; -webkit-transform-origin: 0% 0%; -webkit-transform: scale(0.26953125) translate3d(3840px, 0px, 0px); position: absolute; display: block; left: 0px; top: 0px; width: 1280px; height: 1424.695652173913px; z-index: 100; visibility: visible; opacity: 1; -webkit-perspective-origin-x: 2560px; -webkit-perspective-origin-y: 1425px;" class="tile-container"><iframe class="tile" src="http://soasta.com"></iframe></div>
    <div style="transition: all 200ms ease-out; -webkit-transition: all 200ms ease-out; -webkit-transform-origin: 0% 0%; -webkit-transform: scale(0.26953125) translate3d(0px, 1424.695652173913px, 0px); position: absolute; display: block; left: 0px; top: 0px; width: 1280px; height: 1424.695652173913px; z-index: 100; visibility: visible; opacity: 1; -webkit-perspective-origin-x: 2560px; -webkit-perspective-origin-y: 1425px;" class="tile-container"><iframe class="tile" src="http://soasta.com"></iframe></div>
    <div style="transition: all 200ms ease-out; -webkit-transition: all 200ms ease-out; -webkit-transform-origin: 0% 0%; -webkit-transform: scale(0.26953125) translate3d(1280px, 1424.695652173913px, 0px); position: absolute; display: block; left: 0px; top: 0px; width: 1280px; height: 1424.695652173913px; z-index: 100; visibility: visible; opacity: 1; -webkit-perspective-origin-x: 2560px; -webkit-perspective-origin-y: 1425px;" class="tile-container"><iframe class="tile" src="http://soasta.com"></iframe></div>
    <div style="transition: all 200ms ease-out; -webkit-transition: all 200ms ease-out; -webkit-transform-origin: 0% 0%; -webkit-transform: scale(0.26953125) translate3d(2560px, 1424.695652173913px, 0px); position: absolute; display: block; left: 0px; top: 0px; width: 1280px; height: 1424.695652173913px; z-index: 100; visibility: visible; opacity: 1; -webkit-perspective-origin-x: 2560px; -webkit-perspective-origin-y: 1425px;" class="tile-container"><iframe class="tile" src="http://soasta.com"></iframe></div>
    <div style="transition: all 200ms ease-out; -webkit-transition: all 200ms ease-out; -webkit-transform-origin: 0% 0%; -webkit-transform: scale(0.26953125) translate3d(3840px, 1424.695652173913px, 0px); position: absolute; display: block; left: 0px; top: 0px; width: 1280px; height: 1424.695652173913px; z-index: 100; visibility: visible; opacity: 1; -webkit-perspective-origin-x: 2560px; -webkit-perspective-origin-y: 1425px;" class="tile-container"><iframe class="tile" src="http://soasta.com"></iframe></div>
  /-->
  </div>
</body>
</html>
